<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Seller Dashboard</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
    />
    <link rel="stylesheet" href="/css/sellerpage.css" />
    <link rel="stylesheet" href="/css/welcome_S.css" />
    <!-- <link rel="stylesheet" href="/css/sellerProfile.css"> -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <style>
      .submenu {
        display: none;
        transition: all 0.3s ease;
      }

      .submenu.show {
        display: block;
      }

      body {
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 0;
        display: flex;
        min-height: 100vh;
        flex-direction: row;
      }

      .sidebar {
        width: 220px;
        color: #fff;
        position: fixed;
        top: 0;
        bottom: 0;
        padding-top: 20px;
        transition: all 0.3s ease;
      }

      .sidebar .logo {
        text-align: center;
        margin-bottom: 20px;
      }

      .sidebar nav a {
        display: block;
        padding: 10px 20px;
        text-decoration: none;
        transition: background 0.3s;
      }

      .submenu a {
        padding-left: 40px;
      }

      /* Add this to your CSS file */

      .user-details {
        padding: 10px;
        text-align: center;
        border-bottom: 1px solid #ddd;
        /* Optional: Adds a border below the user details section */
      }

      .profile-image-frame {
        width: 80px;
        /* Adjust width as needed */
        height: 80px;
        /* Adjust height as needed */
        border: 3px solid #ddd;
        /* Border color and width */
        border-radius: 50%;
        /* Makes the frame circular */
        overflow: hidden;
        /* Hides overflowed parts of the image */
        margin: 0 auto;
        /* Centers the image */
        display: flex;
        /* Centers the image */
        align-items: center;
        justify-content: center;
      }

      .profile-image-frame img {
        width: 100%;
        /* Ensures the image fills the frame */
        height: 100%;
        /* Ensures the image fills the frame */
        object-fit: cover;
        /* Ensures the image covers the frame */
        display: block;
        /* Removes any default space below the image */
      }

      .user-info {
        margin-top: 10px;
        color: #fff;
        /* Text color */
      }

      .user-info .user-name {
        font-weight: bold;
        margin-bottom: 5px;
      }

      .user-info .user-email,
      .user-info .user-location {
        font-size: 14px;
        margin-bottom: 5px;
      }

      .user-details p {
        color: #ddd;
      }
    </style>
  </head>

  <body>
    <a href="#content" class="skip-link">Skip to content</a>
    <div class="sidebar" role="navigation">
      <!-- EJS template file, e.g., views/layout.ejs -->

      <!-- EJS template file, e.g., views/layout.ejs -->

      <div class="user-details">
        <div class="profile-image-frame">
          <img
            src="/images/<%= currentUser.profileImage %>"
            alt="Profile Image"
          />
        </div>
        <div class="user-info">
          <p class="user-name"><%= currentUser.username %></p>
          <p class="user-email"><%= currentUser.email %></p>
          <p class="user-location"><%= currentUser.location %></p>
        </div>
      </div>

      <nav style="padding-top: 20px">
        <a href="/seller" aria-label="Home"><i class="fas fa-home"></i> Home</a>
        <a href="#" onclick="loadPage('/seller/profile')" aria-label="Profile"
          ><i class="fas fa-user"></i> Profile</a
        >
        <a
          href="#"
          onclick="toggleSubMenu('product-submenu')"
          aria-label="Product"
          aria-expanded="false"
          ><i class="fas fa-box"></i> Product</a
        >
        <div id="product-submenu" class="submenu">
          <a
            href="#"
            onclick="loadPage('/seller/product')"
            aria-label="Add Product"
            ><i class="fas fa-plus-circle"></i> Add Product</a
          >
          <a
            href="#"
            onclick="loadPage('/seller/manageProducts')"
            aria-label="View Products"
            ><i class="fas fa-eye"></i> View Products</a
          >
        </div>

        <a href="#" onclick="confirmLogout(event)" aria-label="Logout"
          ><i class="fas fa-sign-out-alt"></i> Logout</a
        >
      </nav>
    </div>
    <main class="container" id="content">
      <!-- Content will be loaded here -->
      <div class="welcome">
        <h1>Welcome, Seller!</h1>
        <p>
          We're glad to have you back. Here's a quick overview of your store's
          performance.
        </p>
      </div>
      <div class="quick-links">
        <a href="#" onclick="loadPage('/seller/product')">
          <i class="fas fa-plus-circle"></i>
          <p>Add New Product</p>
        </a>
        <a href="#" onclick="loadPage('/sales')">
          <i class="fas fa-chart-line"></i>
          <p>View Sales</p>
        </a>
        <a href="#" onclick="loadPage('/notifications')">
          <i class="fas fa-bell"></i>
          <p>Check Notifications</p>
        </a>
      </div>
      <div class="summary">
        <div class="card">
          <i class="fas fa-dollar-sign"></i>
          <h3>Total Sales</h3>
          <p>$12,345</p>
        </div>
        <div class="card">
          <i class="fas fa-box"></i>
          <h3>Total Products</h3>
          <p>48</p>
        </div>
        <div class="card">
          <i class="fas fa-shopping-cart"></i>
          <h3>Total Orders</h3>
          <p>123</p>
        </div>
        <div class="card">
          <i class="fas fa-undo-alt"></i>
          <h3>Pending Refunds</h3>
          <p>5</p>
        </div>
        <div class="card">
          <i class="fas fa-bell"></i>
          <h3>Notifications</h3>
          <p>8</p>
        </div>
      </div>
    </main>
    <script src="/js/addProduct.js"></script>
    <script src="/js/viewProducts.js"></script>
    <script src="/js/deleteProduct.js"></script>
    <script src="/js/getSubcategories.js"></script>
    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const submenuToggle = document.querySelector(
          '[onclick^="toggleSubMenu"]'
        );
        submenuToggle.addEventListener("click", () => {
          const isExpanded =
            submenuToggle.getAttribute("aria-expanded") === "true" || false;
          submenuToggle.setAttribute("aria-expanded", !isExpanded);
        });
      });

      function loadPage(url) {
        fetch(url)
          .then((response) => {
            if (!response.ok) {
              throw new Error("Network response was not ok");
            }
            return response.text();
          })
          .then((data) => {
            document.getElementById("content").innerHTML = data;
            document.title =
              "Seller Dashboard - " +
              url
                .split("/")
                .pop()
                .replace(".ejs", "")
                .replace("-", " ")
                .toUpperCase();
          })
          .catch((error) => {
            console.error("Error loading page:", error);
            document.getElementById("content").innerHTML =
              "<p>Error loading page. Please try again later.</p>";
          });
      }

      function toggleSubMenu(id) {
        const submenu = document.getElementById(id);
        submenu.classList.toggle("show");
      }

      function confirmLogout(event) {
        event.preventDefault();
        Swal.fire({
          title: "Are you sure?",
          text: "You will be logged out of your account.",
          icon: "warning",
          showCancelButton: true,
          confirmButtonColor: "#3085d6",
          cancelButtonColor: "#d33",
          confirmButtonText: "Yes, logout!",
          cancelButtonText: "Cancel",
        }).then((result) => {
          if (result.isConfirmed) {
            window.location.href = "/seller/logout"; // Replace with your logout route
          }
        });
      }
    </script>
  </body>
</html>
